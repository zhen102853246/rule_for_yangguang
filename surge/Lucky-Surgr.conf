[General]
# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 3
# UDP ä¼˜å…ˆçº§
udp-priority = false
# > å›½å†… æµ‹è¯• URL
internet-test-url = http://www.baidu.com
# > ä»£ç†æµ‹é€Ÿ URL
# proxy-test-url = http://cp.cloudflare.com/generate_204
proxy-test-url = http://captive.apple.com/generate_204
# > è‡ªå®šä¹‰ GeoIP æ•°æ®åº“
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
# geoip-maxmind-url = https://raw.githubusercontent.com/JMVoid/ipip2mmdb/release/Country.mmdb
# > IPv6 æ”¯æŒï¼ˆé»˜è®¤å…³é—­ï¼‰
ipv6 = false
# > DNS æœåŠ¡å™¨
dns-server = 119.29.29.29, 223.5.5.5, 114.114.114.114, 202.141.176.93, 202.141.178.13, 218.30.19.40, 211.137.130.3, 117.50.10.10, system
# DoH æœåŠ¡å™¨
# = https://doh.pub/dns-query, https://dns.alidns.com/dns-query
# > å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›é”™è¯¯é¡µ
show-error-page-for-reject = true
# è·³è¿‡ä»£ç†(å·²æ³¨é‡Š)Surge 5.8.0é»˜è®¤VIF Only
# skip-proxy = 239.255.255.250/32, 202.100.64.68/32, 157.16.0.0/16, 60.164.159.51/29, 192.168.0.0/16, 127.0.0.0/8, 10.0.0.0/8, 172.16.0.0/12,100.64.0.0/10, 17.0.0.0/8, *.local, *.crashlytics.com, seed-sequoia.siri.apple.com, localhost, sequoia.apple.com, www.abchina.com.cn, system
# > å…è®¸ Wi-Fi è®¿é—® (ä»… iOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œfalseã€æ”¹ä¸ºã€Œtrueã€)
allow-wifi-access = false
# HTTP æœåŠ¡ç«¯å£
wifi-access-http-port = 6528
# SOCKS5 æœåŠ¡ç«¯å£
wifi-access-socks5-port = 6582
# å…è®¸ä¸ªäººçƒ­ç‚¹è®¿é—®
allow-hotspot-access = true
# > å¢å¼ºç‰ˆ Wi-Fi åŠ©ç†
wifi-assist = false
# HTTP-APIæ§åˆ¶
http-api-tls = false
http-api-web-dashboard = false
use-default-policy-if-wifi-not-primary = false
# > è¿œç¨‹æ§åˆ¶å™¨
all-hybrid = false
exclude-simple-hostnames = true
# All Hybrid ç½‘ç»œå¹¶å‘
skip-proxy = 239.255.255.250/32, 202.100.64.68/32, 157.16.0.0/16, 60.164.159.51/29, 192.168.0.0/16, 127.0.0.0/8, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10,  *.local, *.crashlytics.com, seed-sequoia.siri.apple.com, localhost, sequoia.apple.com, www.abchina.com.cn, system
# è·³è¿‡ä»£ç†  Surge 5.8.0é»˜è®¤VIF Only å¯ä»¥æ³¨é‡Šæ‰
read-etc-hosts = true
# > æ’é™¤ç®€å•ä¸»æœºå
loglevel = notify
# > ä» /etc/hosts è¯»å– DNS è®°å½•
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
# > æ—¥å¿—çº§åˆ«
disable-geoip-db-auto-update = true
# > Always Real IP Hosts
udp-policy-not-supported-behaviour = reject
# > Surge VIF
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
# tun-included-routes = 192.168.1.12/32
# > ç¦ç”¨ GEOIP è‡ªåŠ¨æ›´æ–°
force-http-engine-hosts = *.ott.cibntv.net
# å¦‚æœæ²¡æœ‰ä»£ç†æœåŠ¡å™¨æ”¯æŒ UDP è½¬å‘ï¼Œå¯ä¿®æ”¹ä¸ºã€Œ direct ã€æˆ–æ³¨é‡Šä¸‹æ¡ï¼Œä½†éœ€æ³¨æ„åŒä¸€ç›®æ ‡ä¸»æœºå TCP è¯·æ±‚ä¸ UDP è¯·æ±‚çš„æºåœ°å€ä¸åŒæ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£é™©ã€‚
# > TCP Force HTTP Hosts
# è®©SurgeæŠŠTCPè¿æ¥å½“ä½œHTTPè¯·æ±‚æ¥å¤„ç†
# Surge HTTPå¼•æ“å°†å¤„ç†è¿™äº›è¯·æ±‚
# æ‰€æœ‰çš„é«˜çº§åŠŸèƒ½ï¼Œå¦‚æ•è·ã€é‡å†™å’Œè„šæœ¬ç­‰éƒ½å¯ä»¥ä½¿ç”¨

[Proxy]
#!include YToo_SS.conf, eevpn.conf

[Proxy Group]
# æ‰‹åŠ¨é€‰æ‹©
# â™¥ï¸ç½‘é€Ÿè¶…å¿« = select, no-alert=0, hidden=0, include-all-proxies=1, update-interval=0, policy-path=!include YToo_SS.conf
â™¥ï¸ç½‘é€Ÿè¶…å¿« = select, no-alert=0, hidden=0, include-all-proxies=1, update-interval=0
# è‡ªåŠ¨é€‰æ‹©
ğŸŸ¡å»¶è¿Ÿä¼˜é€‰ = url-test, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(æ—¥ç”¨), include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# è‹¹æœæœåŠ¡
ğŸè‹¹æœæœåŠ¡ = select, DIRECT, ğŸŸ¡å»¶è¿Ÿä¼˜é€‰, â™¥ï¸ç½‘é€Ÿè¶…å¿«, REJECT, ğŸ‡­ğŸ‡°é¦™æ¸¯, ğŸ‡¨ğŸ‡³å°æ¹¾, ğŸ‡¯ğŸ‡µæ—¥æœ¬, ğŸ‡°ğŸ‡·éŸ©å›½, ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, ğŸ‡ºğŸ‡¸ç¾å›½, ğŸç‰¹æ®Š, no-alert=0, hidden=0, include-all-proxies=0
# æ¸¯å°ç•ªå‰§
ğŸ–¥ï¸æ¸¯å°ç•ªå‰§ = select, ğŸ‡­ğŸ‡°é¦™æ¸¯, ğŸ‡¨ğŸ‡³å°æ¹¾, DIRECT, REJECT, no-alert=0, hidden=0, include-all-proxies=0
# å›½å†…åª’ä½“
ğŸ’¿å›½å†…åª’ä½“ = select, DIRECT, REJECT, ğŸ‡­ğŸ‡°é¦™æ¸¯, ğŸ‡¨ğŸ‡³å°æ¹¾, no-alert=0, hidden=0, include-all-proxies=0
# å›½é™…åª’ä½“
ğŸ“€å›½é™…åª’ä½“ = select, ğŸŸ¡å»¶è¿Ÿä¼˜é€‰, â™¥ï¸ç½‘é€Ÿè¶…å¿«, ğŸ‡­ğŸ‡°é¦™æ¸¯, DIRECT, REJECT, ğŸ‡¨ğŸ‡³å°æ¹¾, ğŸ‡¯ğŸ‡µæ—¥æœ¬, ğŸ‡°ğŸ‡·éŸ©å›½, ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, ğŸ‡ºğŸ‡¸ç¾å›½, ğŸç‰¹æ®Š, no-alert=0, hidden=0, include-all-proxies=0
# å…¨çƒåŠ é€Ÿ
ğŸŸ¢å…¨çƒåŠ é€Ÿ = select, ğŸŸ¡å»¶è¿Ÿä¼˜é€‰, â™¥ï¸ç½‘é€Ÿè¶…å¿«, DIRECT, REJECT, ğŸ‡­ğŸ‡°é¦™æ¸¯, ğŸ‡¨ğŸ‡³å°æ¹¾, ğŸ‡¯ğŸ‡µæ—¥æœ¬, ğŸ‡°ğŸ‡·éŸ©å›½, ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, ğŸ‡ºğŸ‡¸ç¾å›½, ğŸç‰¹æ®Š, no-alert=0, hidden=0, include-all-proxies=0
# å…œåº•è§„åˆ™
ğŸŸ£æ³•å¤–ç‹‚å¾’ = select, ğŸŸ¡å»¶è¿Ÿä¼˜é€‰, â™¥ï¸ç½‘é€Ÿè¶…å¿«, DIRECT, REJECT, ğŸ‡­ğŸ‡°é¦™æ¸¯, ğŸ‡¨ğŸ‡³å°æ¹¾, ğŸ‡¯ğŸ‡µæ—¥æœ¬, ğŸ‡°ğŸ‡·éŸ©å›½, ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, ğŸ‡ºğŸ‡¸ç¾å›½, ğŸç‰¹æ®Š, no-alert=0, hidden=0, include-all-proxies=0
# é¦™æ¸¯åˆ†æµ
ğŸ‡­ğŸ‡°é¦™æ¸¯ = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(?=.*(ğŸ‡­ğŸ‡°|æ¸¯|HK|(?i)Hong))^((?!(3å€)).)*$, include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# å°æ¹¾åˆ†æµ
ğŸ‡¨ğŸ‡³å°æ¹¾ = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(å°)|(Tai)|(TW), include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# æ—¥æœ¬åˆ†æµ
ğŸ‡¯ğŸ‡µæ—¥æœ¬ = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥æœ¬)|(Japan)|(JP), include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# æ–°åŠ å¡åˆ†æµ
ğŸ‡¸ğŸ‡¬æ–°åŠ å¡ = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(å¡)|(Singapore)|(SG), include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# ç¾å›½åˆ†æµ
ğŸ‡°ğŸ‡·éŸ©å›½ = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(ğŸ‡°ğŸ‡·)|(éŸ©)|(KR), include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# éŸ©å›½åˆ†æµ
ğŸ‡ºğŸ‡¸ç¾å›½ = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US), include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# ç‰¹æ®Šåˆ†æµ
ğŸç‰¹æ®Š = select, no-alert=0, hidden=0, include-all-proxies=0, update-interval=0, policy-regex-filter=(ğŸ‡¨ğŸ‡±)|(ç‰¹æ®Š)|(è´­ç‰©), include-other-group=â™¥ï¸ç½‘é€Ÿè¶…å¿«
# åˆ†æµè§„åˆ™

[Rule]
DOMAIN-SUFFIX,apple.com,DIRECT
DOMAIN,formulae.brew.sh,ğŸŸ¡å»¶è¿Ÿä¼˜é€‰
PROCESS-NAME,/Applications/WeChat.app/Contents/MacOS/WeChat,DIRECT
PROCESS-NAME,/Applications/WeChat.app/Contents/MacOS/WeChatAppEx.app/Contents/Frameworks/WeChatAppEx Framework.framework/Versions/C/Helpers/WeChatAppEx Helper.app/Contents/MacOS/WeChatAppEx Helper,DIRECT
PROCESS-NAME,/Applications/TickTick.app/Contents/MacOS/TickTick,DIRECT
PROCESS-NAME,/Applications/ä¼ä¸šå¾®ä¿¡.app/Contents/MacOS/ä¼ä¸šå¾®ä¿¡,DIRECT
PROCESS-NAME,/Library/Input Methods/SogouInput.app/Contents/MacOS/SogouInput,DIRECT
PROCESS-NAME,/Applications/QQMusic.app/Contents/MacOS/QQMusic,DIRECT
DOMAIN,gitee.com,DIRECT
PROCESS-NAME,/Applications/QQ.app/Contents/Frameworks/QQ Helper.app/Contents/MacOS/QQ Helper,DIRECT
PROCESS-NAME,/Applications/QQ.app/Contents/MacOS/QQ,DIRECT
PROCESS-NAME,/Applications/wpsoffice.app/Contents/SharedSupport/wpscloudsvr.app/Contents/MacOS/wpscloudsvr,DIRECT
PROCESS-NAME,/Applications/NeteaseMusic.app/Contents/MacOS/NeteaseMusic,DIRECT
PROCESS-NAME,/Library/Input Methods/SogouInput.app/Contents/MacOS/SogouInput,DIRECT
PROCESS-NAME,/Applications/å¤¸å…‹ç½‘ç›˜.app/Contents/Frameworks/å¤¸å…‹ç½‘ç›˜ Helper.app/Contents/MacOS/å¤¸å…‹ç½‘ç›˜ Helper,DIRECT
DOMAIN,weibocdn.com,DIRECT
DOMAIN,weibo.com,DIRECT
IP-CIDR,202.100.64.68/32,DIRECT,no-resolve
IP-CIDR,157.16.0.0/16,DIRECT,no-resolve
IP-CIDR,60.164.159.51/29,DIRECT,no-resolve
IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
# > è€³ä¸œæ©™å¯¼èˆªç«™
DOMAIN,erdon.cc,ğŸŸ¡å»¶è¿Ÿä¼˜é€‰
# > æŠ–éŸ³æœ¬åœ°åˆ†æµ
DOMAIN-SUFFIX,snssdk.com,DIRECT
DOMAIN-SUFFIX,amemv.com,DIRECT
# > å…¶å®ƒ
DOMAIN-SUFFIX,local,DIRECT
# ---è¿›ç¨‹è§„åˆ™---
# > åªåœ¨macOSç”Ÿæ•ˆï¼ŒiOSä¼šè‡ªåŠ¨å¿½ç•¥è¿™ä¸ªç±»å‹çš„è§„åˆ™
PROCESS-NAME,UUBooster,DIRECT
# ---è§„åˆ™é›†----
# ---å†…ç½®è§„åˆ™é›†---
# SYSTEM
# > åŒ…å«äº†ç»å¤§å¤šæ•°æ¥è‡ªmacOSå’ŒiOSç³»ç»Ÿæœ¬èº«æ‰€å‘é€çš„è¯·æ±‚
# RULE-SET,SYSTEM,DIRECT
# Nba
DOMAIN-SUFFIX,nbaprop.sc.omtrdc.net,DIRECT
DOMAIN-SUFFIX,akamaized.net,DIRECT
DOMAIN-SUFFIX,nba.studio.easelive.tv,DIRECT
DOMAIN-SUFFIX,nba-cdn.cloud.easelive.tv,DIRECT
DOMAIN-SUFFIX,nba.com,DIRECT
DOMAIN-SUFFIX,nlnbaqos.neulion.com,DIRECT
# ç¾å›¢
DOMAIN-SUFFIX,d.meituan.net,DIRECT // Added for: route-stats.d.meituan.net:443
DOMAIN-SUFFIX,speedv6.m.jd.com,DIRECT // Added for: speedv6.m.jd.com:443
DOMAIN-SUFFIX,spotify.com,DIRECT
DOMAIN-SUFFIX,zhuishudashi.net,DIRECT // Added for: g-lens2.zhuishudashi.net:443
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP
# è…¾è®¯ WeChat
RULE-SET,https://github.com/NobyDa/Script/raw/master/Surge/WeChat.list,DIRECT
# é˜²æ­¢åº”ç”¨å¾ªç¯è¯·æ±‚
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
# è§„åˆ™ä¿®æ­£
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/Unbreak.list,DIRECT
# > å±€åŸŸç½‘åœ°å€
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,DIRECT
# å¹¿å‘Šæ‹¦æˆª
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/AdBlock.list,REJECT
# ---è¿œç¨‹è§„åˆ™é›†---
# > å»å¹¿å‘Š
# RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list,REJECT
# DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_Domain.list,REJECT
# å›½é™…åª’ä½“
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/Streaming.list,ğŸ“€å›½é™…åª’ä½“
# æ¸¯å°ç•ªå‰§
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/StreamingSE.list,ğŸ–¥ï¸æ¸¯å°ç•ªå‰§
# å›½å†…åª’ä½“
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/StreamingCN.list,ğŸ’¿å›½å†…åª’ä½“
# å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/Global.list,ğŸŸ¢å…¨çƒåŠ é€Ÿ
# > è‹¹æœæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,ğŸè‹¹æœæœåŠ¡
# > å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list,â™¥ï¸ç½‘é€Ÿè¶…å¿«
# å‰©ä½™æœªåŒ¹é…çš„å›½å†…ç½‘ç«™
DOMAIN-SUFFIX,cn,DIRECT
DOMAIN-KEYWORD,-cn,DIRECT
# ---IPåœ°å€è§„åˆ™---
# > GeoIP China
GEOIP,CN,DIRECT
# å…œåº•è§„åˆ™
FINAL,ğŸŸ£æ³•å¤–ç‹‚å¾’,dns-failed

[Host]

# ---å®šä¹‰æœ¬åœ°DNSè®°å½•---
# è¯¥åŠŸèƒ½ç­‰åŒäº /etc/hostsï¼ŒåŠ ä¸Šäº†æ³›è§£æå’Œåˆ«åæ”¯æŒã€‚
# > Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
# > PlayStation
*.dl.playstation.net = server:119.29.29.29
# > æ·˜å®
*.taobao.com = server:223.5.5.5
# > å¤©çŒ«
*.tmall.com = server:223.5.5.5
# > é˜¿é‡Œäº‘
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
# > è…¾è¿…
*.tencent.com = server:119.29.29.29
# > è…¾è®¯QQ
*.qq.com = server:119.29.29.29
# > å¾®ä¿¡
*.weixin.com = server:119.29.29.29
*.qpic.cn = server:119.29.29.29
# > äº¬ä¸œ
*.jd.com = server:119.29.29.29
# > å“”å“©å“”å–±
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
# > ç½‘æ˜“
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
# > å°ç±³
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
# è§£é”äº†ã€Œæ¨¡å—ã€åŠŸèƒ½çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ General.sgmodule åå¯ç§»é™¤ [URL Rewrite] åŠ [MITM] çš„ã€Œhostname = www.google.cn,api.abema.ioã€éƒ¨åˆ†
# å»ºè®®ä½¿ç”¨ General.sgmoduleï¼Œå…¶ä»– .sgmodule æŒ‰éœ€åŠ å…¥
# æœªè§£é”ã€Œæ¨¡å—ã€åŠŸèƒ½çš„ç”¨æˆ·ä¸è¦åˆ é™¤ä»¥ä¸‹å†…å®¹ï¼Œå‚ç…§
# (https://github.com/DivineEngine/Profiles/tree/master/Surge)ä½¿ç”¨å¿«æ·æŒ‡ä»¤æ›´æ–°ç›¸å…³å†…å®¹ã€‚

[URL Rewrite]
^https?:\/\/(www\.)?g\.cn https://www.google.com 302
^https?:\/\/(www\.)?google\.cn https://www.google.com 302

[MITM]
skip-server-cert-verify = true
hostname = *, %APPEND% pan.baidu.com, *account.wps.cn, *account.wps.com, api22-normal-c-alisg.tiktokv.com:443, webcast-normal.tiktokv.com:443, %APPEND% www.google.cn, www.g.cn
ca-passphrase = 1
ca-p12 = 